@{
    ViewData["Title"] = "Гра — Злови гантелю";
    Layout = "_Layout"; // або твій layout
}

<script src="~/js/game-canvas.js"></script>

<div class="game-page container my-4">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card game-card p-3">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h3 class="mb-0">Злови гантелю</h3>
                    <div>
                        <button id="btnStart" class="btn btn-success btn-sm">Start</button>
                        <button id="btnPause" class="btn btn-warning btn-sm">Pause</button>
                        <button id="btnReset" class="btn btn-secondary btn-sm">Reset</button>
                        <a asp-controller="Home" asp-action="Index" class="btn btn-outline-light btn-sm">Back</a>
                    </div>
                </div>

                <div class="game-toolbar mb-2 d-flex justify-content-between align-items-center">
                    <div>
                        <span class="me-3">Score: <strong id="score">0</strong></span>
                        <span class="me-3">Lives: <strong id="lives">3</strong></span>
                        <span>Level: <strong id="level">1</strong></span>
                    </div>
                    <div>
                        <small class="text-muted">Рекорд: <strong id="best">0</strong></small>
                    </div>
                </div>

                <div class="canvas-wrapper" style="position:relative;">
                    <canvas id="gameCanvas" width="900" height="500" style="width:100%; height:auto; display:block; background: linear-gradient(180deg,#0b0b0b,#141414); border-radius:10px;"></canvas>
                </div>
                <!-- Modal -->
                <!-- Modal Game Over -->
                <div class="modal fade" id="gameOverModal" tabindex="-1" aria-labelledby="gameOverModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content bg-dark text-light">
                            <div class="modal-header border-secondary">
                                <h5 class="modal-title" id="gameOverModalLabel">Гру завершено</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <p>Рахунок: <strong id="finalScore"></strong></p>
                                <p>Рекорд: <strong id="bestScore"></strong></p>
                            </div>
                            <div class="modal-footer border-secondary">
                              
                                <button type="button" class="btn btn-warning" id="btnRestart">Закрити</button>
                            </div>
                        </div>
                    </div>
                </div>




                <p class="mt-3 text-muted small">
                    Керуй платформою мишкою або торком. Злови гантелі — отримай очки. Пропусти — втратиш життя.
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const btnRestart = document.getElementById('btnRestart');
        const btnReset = document.getElementById('btnReset');
        const modalEl = document.getElementById('gameOverModal');

        if (btnRestart && btnReset && modalEl) {
            btnRestart.addEventListener('click', () => {
                btnReset.click(); // перезапускаємо гру
                const modal = bootstrap.Modal.getInstance(modalEl);
                if (modal) modal.hide();
            });
        }
    });
</script>

@section Scripts {
    <script src="~/js/game-canvas.js"></script>
}
